!function(e){var t={};function n(d){if(t[d])return t[d].exports;var s=t[d]={i:d,l:!1,exports:{}};return e[d].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,d){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(d,s,function(t){return e[t]}.bind(null,s));return d},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);class d{constructor(e){this.host=e}SendRequest(e,t,n=null,d,s=null){var i=new XMLHttpRequest;i.open(t,this.host+e,!0),i.setRequestHeader("Content-type","application/json"),i.onload=function(){if(200==this.status){var e=JSON.parse(i.responseText);1===e.Status?d(e.Data):alert(e.Message)}else s()},null===n?i.send():i.send(n)}}class s{constructor(){this.columns=[]}AddColumn(e){this.columns.push(e)}Build(e){let t=document.createElement("table");return t.classList.add("table","table-hover"),t.appendChild(this.BuildHeader()),t.appendChild(this.BuildBody(e)),t}BuildHeader(){let e=document.createElement("thead"),t=document.createElement("tr");e.classList.add("thead-light"),e.appendChild(t);for(let e of this.columns){let n=document.createElement("th");n.innerText=e.title,t.appendChild(n)}return e}BuildBody(e){let t=document.createElement("tbody");for(let n of e){let e=document.createElement("tr");e.dataset.rowId=n.Id;for(let t of this.columns){let d=document.createElement("td");!t.field&&t.builder?t.builder(d,n):d.appendChild(new Text(n[t.field])),e.appendChild(d)}t.appendChild(e)}return t}}class i{constructor(e){this.fields=[],this.form=document.createElement("form"),this.onAddClick=e}AddField(e){this.fields.push(e)}Build(){this.form.classList.add("form-container","card-body");let e=document.createElement("button");e.classList.add("btn","btn-primary"),e.innerText="Submit",e.addEventListener("click",e=>{e.preventDefault(),this.CheckValidity()&&(this.onAddClick(this.GetData()),this.form.reset())});for(let e of this.fields){let t=document.createElement("div");t.classList.add("form-group"),t.innerHTML=`\n                    <label>${e.title}</label>\n                    <input name="${e.name}" class="form-control" required type="${e.type}" placeholder="${e.placeholder}"/>\n                `,this.form.appendChild(t)}return this.form.appendChild(e),this.form}CheckValidity(){let e=!0;return Array.from(this.form.querySelectorAll("input")).forEach(t=>{t.validity.valid?(t.classList.remove("invalid"),t.classList.add("valid")):(t.classList.add("invalid"),e=!1)}),e}GetData(){let e={};return this.form.querySelectorAll("input[name]").forEach(t=>{e[t.name]=t.value}),e}}class l{constructor(){this.content=null}Build(){let e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("button");return t.classList.add("card"),e.classList.add("modalBackdrop"),n.classList.add("closeModal","close"),n.setAttribute("aria-label","Close"),n.innerHTML='<span aria-hidden="true">&times;</span>',t.appendChild(n),e.appendChild(t),n.addEventListener("click",()=>{e.classList.remove("visible")}),t.appendChild(this.content),e}SetContent(e){this.content=e}}class r extends i{constructor(e){super(e),this.onAddClick=e}Build(){let e=super.Build();e.classList.add("login-form");let t=document.createElement("a");return e.querySelector("button").addEventListener("click",e=>{e.preventDefault()}),t.classList.add("link-new-acc"),t.innerHTML="dont have an account yet, get a new one :)",t.addEventListener("click",()=>{this.onAddClick()}),e.appendChild(t),e}}const a="http://localhost:51622/api/";new class{constructor(e){this.el=e,this.LoadUsersPage=this.LoadUsersPage.bind(this),this.LoginPage=this.LoginPage.bind(this),this.ProcessRoute()}CreateHeader(){let e=document.createElement("div");e.classList.add("header");let t=document.createElement("h1");t.innerHTML="Manage users";let n=document.createElement("a");n.classList.add("modal-btn","btn","btn-info","test","mb-3"),n.innerText="Add user",n.addEventListener("click",()=>{document.querySelector(".modalBackdrop").classList.add("visible")}),e.appendChild(t),this.el.appendChild(n),this.el.appendChild(e)}CreateMain(){let e=document.createElement("div");e.classList.add("main"),this.el.appendChild(e)}LoadUsers(){let e=this.CreateXHRService(),t=document.querySelector(".main");e.SendRequest("users/getusers","get",null,e=>{let n=new s;for(n.AddColumn({title:"Id",field:"Id"}),n.AddColumn({title:"Name",field:"Name"}),n.AddColumn({title:"Second Name",field:"SecondName"}),n.AddColumn({title:"Email",field:"Email"}),n.AddColumn({title:"Controls",builder:this.AddControls.bind(this)});t.firstChild;)t.removeChild(t.firstChild);t.appendChild(n.Build(e))})}RemoveUser(e,t){this.CreateXHRService().SendRequest("users/RemoveUser","post",JSON.stringify(e.Id),()=>{t.target.closest("tr").remove(),alert("user has been deleted")},()=>{alert("not working!")})}AddUser(e){let t=this.CreateXHRService();t.SendRequest("users/AddUser","post",JSON.stringify(e),()=>{this.LoadUsersPage()},()=>{alert("not working!")}),t.SendRequest()}LoginUser(e){let t=this.CreateXHRService();t.SendRequest("users/LoginUser","post",JSON.stringify(e),()=>{this.LoadUsers()},()=>{alert("not working!")}),t.SendRequest()}AddControls(e,t){let n=document.createElement("button");n.classList.add("btn","btn-danger"),n.innerText="remove",n.addEventListener("click",e=>{this.RemoveUser(t,e)}),e.appendChild(n)}CreateXHRService(){return new d(a)}LoadUsersPage(){this.CreateHeader(),this.CreateMain(),this.LoadUsers();let e=new l,t=new i(this.AddUser.bind(this));t.AddField({title:"User name",name:"Name",placeholder:"please type your name",type:"text"}),t.AddField({title:"Second name",name:"secondName",placeholder:"please type second name",type:"text"}),t.AddField({title:"Email",name:"email",placeholder:"please type email",type:"email"}),t.AddField({title:"Password",name:"password",placeholder:"please type your name",type:"password"}),e.SetContent(t.Build()),document.body.appendChild(e.Build())}Navigate(e){window.history.pushState({},e,window.location.origin+e),this.ProcessRoute()}LoginPage(){let e=new r(()=>{this.Navigate("/users").bind(this)});e.AddField({title:"Your name",name:"Name",placeholder:"please type your name",type:"text"}),e.AddField({title:"Password",name:"passowrd",placeholder:"please type your password",type:"password"}),document.getElementById("app").appendChild(e.Build())}ProcessRoute(){document.getElementById("app").innerHTML="";const e={"/":this.LoginPage,"/users":this.LoadUsersPage};let t=window.location.pathname;if(!(t in e))throw new Error("Invalid url");e[t]()}}(document.getElementById("app"))}]);